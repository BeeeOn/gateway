<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>BeeeOn Gateway: /var/lib/jenkins/workspace/beeeon-gateway-master/src/exporters/JournalQueuingStrategy.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="BeeeOn.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">BeeeOn Gateway
   &#160;<span id="projectnumber">v2019.7.1-14-g859f31f</span>
   </div>
   <div id="projectbrief">Platform to interconnect the IoT world</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_79bd9544c89837812f35b3c5a185b118.html">exporters</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">JournalQueuingStrategy.h</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#pragma once</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor">#include &lt;functional&gt;</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#include &lt;list&gt;</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &lt;map&gt;</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &lt;Poco/DigestEngine.h&gt;</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &lt;Poco/File.h&gt;</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &lt;Poco/Path.h&gt;</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &lt;Poco/Timespan.h&gt;</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &lt;Poco/Timestamp.h&gt;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;exporters/QueuingStrategy.h&quot;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;util/Journal.h&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;util/Loggable.h&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="keyword">namespace </span>BeeeOn {</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div>
<div class="line"><a name="l00040"></a><span class="lineno"><a class="line" href="classBeeeOn_1_1JournalQueuingStrategy.html">   40</a></span>&#160;<span class="keyword">class </span><a class="code" href="classBeeeOn_1_1JournalQueuingStrategy.html">JournalQueuingStrategy</a> : <span class="keyword">public</span> <a class="code" href="classBeeeOn_1_1QueuingStrategy.html">QueuingStrategy</a>, <span class="keyword">protected</span> <a class="code" href="classBeeeOn_1_1Loggable.html">Loggable</a> {</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;        <a class="code" href="classBeeeOn_1_1JournalQueuingStrategy.html">JournalQueuingStrategy</a>();</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;        <span class="keywordtype">void</span> <a class="code" href="classBeeeOn_1_1JournalQueuingStrategy.html#a4b043519cc56089d5c5587a7ccc9b700">setRootDir</a>(<span class="keyword">const</span> std::string &amp;path);</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;        Poco::Path <a class="code" href="classBeeeOn_1_1JournalQueuingStrategy.html#a6170fff4557c0efbf1df0b974311a4af">rootDir</a>() <span class="keyword">const</span>;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        <span class="keywordtype">void</span> <a class="code" href="classBeeeOn_1_1JournalQueuingStrategy.html#aad02148e1b7b9c971c1753351d34c3e4">setDisableGC</a>(<span class="keywordtype">bool</span> disable);</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;        <span class="keywordtype">void</span> <a class="code" href="classBeeeOn_1_1JournalQueuingStrategy.html#a7ec1b88dab5b316f997b52006ad6886a">setNeverDropOldest</a>(<span class="keywordtype">bool</span> neverDrop);</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        <span class="keywordtype">void</span> <a class="code" href="classBeeeOn_1_1JournalQueuingStrategy.html#a678ea887006b9f212d23575dae4e6cee">setBytesLimit</a>(<span class="keywordtype">int</span> bytes);</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        <span class="keywordtype">bool</span> <a class="code" href="classBeeeOn_1_1JournalQueuingStrategy.html#a86859d59fe6bea461434eabf90b23889">overLimit</a>(<span class="keywordtype">size_t</span> bytes) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        <span class="keywordtype">void</span> <a class="code" href="classBeeeOn_1_1JournalQueuingStrategy.html#aa0a205bd24d1e25df1238222984e22ea">setIgnoreIndexErrors</a>(<span class="keywordtype">bool</span> ignore);</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classBeeeOn_1_1JournalQueuingStrategy.html#aff94abfe05f6870c7b0f2e1c2ead11ae">setup</a>();</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        <span class="keywordtype">bool</span> <a class="code" href="classBeeeOn_1_1JournalQueuingStrategy.html#a4a4e22b72f46626a9abef0980bf8b52e">empty</a>() <span class="keyword">override</span>;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        <span class="keywordtype">void</span> <a class="code" href="classBeeeOn_1_1JournalQueuingStrategy.html#abe8b64d8ab42742c1ffe0c82f61717b7">push</a>(<span class="keyword">const</span> std::vector&lt;SensorData&gt; &amp;data) <span class="keyword">override</span>;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        <span class="keywordtype">size_t</span> <a class="code" href="classBeeeOn_1_1JournalQueuingStrategy.html#a3d63d53ba2b2b3beda1a3c4e4a690d6d">peek</a>(std::vector&lt;SensorData&gt; &amp;data, <span class="keywordtype">size_t</span> count) <span class="keyword">override</span>;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        <span class="keywordtype">void</span> <a class="code" href="classBeeeOn_1_1JournalQueuingStrategy.html#a307b2cd8561111fb1b6c9df04ca3e183">pop</a>(<span class="keywordtype">size_t</span> count) <span class="keyword">override</span>;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="keyword">protected</span>:</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        <span class="keyword">typedef</span> std::function&lt;void(</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;                <span class="keyword">const</span> std::string &amp;name,</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;                <span class="keywordtype">size_t</span> offset,</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;                Poco::Timestamp &amp;newest)&gt; BrokenHandler;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        Poco::Timestamp <a class="code" href="classBeeeOn_1_1JournalQueuingStrategy.html#a6ef7b5e37452c91732374dc94da7213d">initIndexAndScan</a>(BrokenHandler broken);</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        <span class="keywordtype">void</span> <a class="code" href="classBeeeOn_1_1JournalQueuingStrategy.html#acdabb64278190634b4575550699b665a">initIndex</a>(<span class="keyword">const</span> Poco::Path &amp;<a class="code" href="classBeeeOn_1_1JournalQueuingStrategy.html#ab2a91776d6b05c3359828c714e5db38e">index</a>);</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        <span class="keywordtype">void</span> <a class="code" href="classBeeeOn_1_1JournalQueuingStrategy.html#a2c3642bf5d270ad9b8d4b9fdfe2bc04c">prescanBuffers</a>(Poco::Timestamp &amp;newest, BrokenHandler broken);</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        <span class="keywordtype">void</span> <a class="code" href="classBeeeOn_1_1JournalQueuingStrategy.html#afe32a6dba8e83e1f17024ad8eaa7a8f0">reportStats</a>(<span class="keyword">const</span> Poco::Timestamp &amp;newest) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        <span class="keywordtype">void</span> <a class="code" href="classBeeeOn_1_1JournalQueuingStrategy.html#a46c7d08af573429bc7c6362669cf2ff5">inspectAndRegisterBuffer</a>(</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                <span class="keyword">const</span> std::string &amp;name,</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                <span class="keywordtype">size_t</span> offset,</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                Poco::Timestamp &amp;newest);</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        Journal::Ptr <a class="code" href="classBeeeOn_1_1JournalQueuingStrategy.html#ab2a91776d6b05c3359828c714e5db38e">index</a>() <span class="keyword">const</span>;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        std::string <a class="code" href="classBeeeOn_1_1JournalQueuingStrategy.html#a2caf7be25e8d3716fa9bad1540714422">writeData</a>(</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                <span class="keyword">const</span> std::string &amp;data,</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;                <span class="keywordtype">bool</span> force = <span class="keyword">true</span>) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        <span class="keywordtype">bool</span> <a class="code" href="classBeeeOn_1_1JournalQueuingStrategy.html#aee42bcae059335f838f27b8e6332a3f0">whipeFile</a>(Poco::File file, <span class="keywordtype">bool</span> usuallyFails = <span class="keyword">false</span>) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        <span class="keywordtype">void</span> <a class="code" href="classBeeeOn_1_1JournalQueuingStrategy.html#a9d4e04ba8924fc945610a937a4dc20de">collectReferenced</a>(std::set&lt;std::string&gt; &amp;referenced) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        <span class="keywordtype">bool</span> <a class="code" href="classBeeeOn_1_1JournalQueuingStrategy.html#a62c0bcb8f8774c7a1cb7bb06788a97b8">garbageCollect</a>(<span class="keyword">const</span> <span class="keywordtype">size_t</span> bytes);</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        <span class="keywordtype">void</span> <a class="code" href="classBeeeOn_1_1JournalQueuingStrategy.html#add97a136cf8938dc20c51daf2e13fdd6">dropOldestBuffers</a>(<span class="keyword">const</span> <span class="keywordtype">size_t</span> bytes);</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        <span class="keywordtype">size_t</span> <a class="code" href="classBeeeOn_1_1JournalQueuingStrategy.html#a584541be030509fcacd219641c44d97d">bytesUsed</a>() <span class="keyword">const</span>;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        <span class="keywordtype">size_t</span> <a class="code" href="classBeeeOn_1_1JournalQueuingStrategy.html#a1d21c18d1377d7daef9320130ddb8a6f">bytesUsedAll</a>() <span class="keyword">const</span>;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        Poco::Path <a class="code" href="classBeeeOn_1_1JournalQueuingStrategy.html#a20a25e98f42452dfc2e286813c1ecabc">pathTo</a>(<span class="keyword">const</span> std::string &amp;name) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        <span class="keyword">static</span> std::string <a class="code" href="classBeeeOn_1_1JournalQueuingStrategy.html#a7e9d33e4f3bf626177c34a5c1157453a">tsString</a>(<span class="keyword">const</span> Poco::Timestamp &amp;t);</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;</div>
<div class="line"><a name="l00227"></a><span class="lineno"><a class="line" href="classBeeeOn_1_1JournalQueuingStrategy_1_1Entry.html">  227</a></span>&#160;        <span class="keyword">class </span><a class="code" href="classBeeeOn_1_1JournalQueuingStrategy_1_1Entry.html">Entry</a> {</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        <span class="keyword">public</span>:</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                <a class="code" href="classBeeeOn_1_1JournalQueuingStrategy_1_1Entry.html">Entry</a>(</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;                        <span class="keyword">const</span> <a class="code" href="classBeeeOn_1_1SensorData.html">SensorData</a> &amp;data,</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                        <span class="keyword">const</span> std::string &amp;buffer,</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;                        <span class="keyword">const</span> <span class="keywordtype">size_t</span> nextOffset);</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;                <span class="keyword">const</span> <a class="code" href="classBeeeOn_1_1SensorData.html">SensorData</a> &amp;data() <span class="keyword">const</span>;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                std::string buffer() <span class="keyword">const</span>;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                <span class="keywordtype">size_t</span> nextOffset() <span class="keyword">const</span>;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        <span class="keyword">private</span>:</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                <a class="code" href="classBeeeOn_1_1SensorData.html">SensorData</a> m_data;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                std::string m_buffer;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;                <span class="keywordtype">size_t</span> m_nextOffset;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        };</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        <span class="keywordtype">size_t</span> <a class="code" href="classBeeeOn_1_1JournalQueuingStrategy.html#a0b283928c47f32f50267b17fc93d9209">precacheEntries</a>(<span class="keywordtype">size_t</span> count);</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        <span class="keywordtype">size_t</span> <a class="code" href="classBeeeOn_1_1JournalQueuingStrategy.html#aafb5ddb639427b28a52ea61b2037f0f7">readEntries</a>(</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;                std::function&lt;<span class="keywordtype">void</span>(<span class="keyword">const</span> <a class="code" href="classBeeeOn_1_1JournalQueuingStrategy_1_1Entry.html">Entry</a> &amp;entry)&gt; proc,</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;                <span class="keywordtype">size_t</span> count);</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;</div>
<div class="line"><a name="l00267"></a><span class="lineno"><a class="line" href="structBeeeOn_1_1JournalQueuingStrategy_1_1FileBufferStat.html">  267</a></span>&#160;        <span class="keyword">struct </span><a class="code" href="structBeeeOn_1_1JournalQueuingStrategy_1_1FileBufferStat.html">FileBufferStat</a> {</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                Poco::Timestamp oldest = Poco::Timestamp::TIMEVAL_MAX;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;                Poco::Timestamp newest = Poco::Timestamp::TIMEVAL_MIN;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;                <span class="keywordtype">size_t</span> bytes = 0;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;                <span class="keywordtype">size_t</span> offset = 0;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;                <span class="keywordtype">size_t</span> broken = 0;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;                <span class="keywordtype">size_t</span> count = 0;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;                <span class="keywordtype">void</span> update(<span class="keyword">const</span> Poco::Timestamp &amp;timestamp);</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        };</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;</div>
<div class="line"><a name="l00282"></a><span class="lineno"><a class="line" href="classBeeeOn_1_1JournalQueuingStrategy_1_1FileBuffer.html">  282</a></span>&#160;        <span class="keyword">class </span><a class="code" href="classBeeeOn_1_1JournalQueuingStrategy_1_1FileBuffer.html">FileBuffer</a> {</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        <span class="keyword">public</span>:</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;                <a class="code" href="classBeeeOn_1_1JournalQueuingStrategy_1_1FileBuffer.html">FileBuffer</a>(</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;                        <span class="keyword">const</span> Poco::Path &amp;path,</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;                        <span class="keywordtype">size_t</span> offset,</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;                        <span class="keywordtype">size_t</span> size);</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                std::string name() <span class="keyword">const</span>;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                Poco::Path path() <span class="keyword">const</span>;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                <span class="keywordtype">size_t</span> offset() <span class="keyword">const</span>;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                <span class="keywordtype">size_t</span> size() <span class="keyword">const</span>;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;                <span class="keywordtype">bool</span> <a class="code" href="classBeeeOn_1_1JournalQueuingStrategy_1_1FileBuffer.html#a75ac6d518da66b7f4c31d0e4882d5beb">exhausted</a>() <span class="keyword">const</span>;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;                <span class="keywordtype">size_t</span> <a class="code" href="classBeeeOn_1_1JournalQueuingStrategy_1_1FileBuffer.html#a4dd81576ba5f916ae5421dc9fa4364e9">readEntries</a>(</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                        std::function&lt;<span class="keywordtype">void</span>(<span class="keyword">const</span> <a class="code" href="classBeeeOn_1_1JournalQueuingStrategy_1_1Entry.html">Entry</a> &amp;entry)&gt; proc);</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;                <span class="keywordtype">size_t</span> <a class="code" href="classBeeeOn_1_1JournalQueuingStrategy_1_1FileBuffer.html#a4dd81576ba5f916ae5421dc9fa4364e9">readEntries</a>(</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;                        std::function&lt;<span class="keywordtype">void</span>(<span class="keyword">const</span> <a class="code" href="classBeeeOn_1_1JournalQueuingStrategy_1_1Entry.html">Entry</a> &amp;entry)&gt; proc,</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                        <span class="keyword">const</span> <span class="keywordtype">size_t</span> count);</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;                <span class="keywordtype">void</span> inspectAndVerify(</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;                        <span class="keyword">const</span> Poco::DigestEngine::Digest &amp;digest,</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;                        <a class="code" href="structBeeeOn_1_1JournalQueuingStrategy_1_1FileBufferStat.html">FileBufferStat</a> &amp;stat) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;                <span class="keyword">static</span> std::string <a class="code" href="classBeeeOn_1_1JournalQueuingStrategy_1_1FileBuffer.html#acc4a2b3cb275625f92fc8b650d04d85b">formatEntries</a>(</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;                        <span class="keyword">const</span> std::vector&lt;SensorData&gt; &amp;data);</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        <span class="keyword">protected</span>:</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                <span class="keywordtype">size_t</span> <a class="code" href="classBeeeOn_1_1JournalQueuingStrategy_1_1FileBuffer.html#ad8fdd1ce436f585a841696aa49a42756">scanEntries</a>(</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;                        <span class="keywordtype">size_t</span> offset,</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                        std::function&lt;<span class="keywordtype">void</span>(<span class="keyword">const</span> <a class="code" href="classBeeeOn_1_1JournalQueuingStrategy_1_1Entry.html">Entry</a> &amp;entry)&gt; proc,</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                        <span class="keywordtype">size_t</span> &amp;bytes,</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;                        <span class="keyword">const</span> <span class="keywordtype">size_t</span> count) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                <span class="keywordtype">size_t</span> <a class="code" href="classBeeeOn_1_1JournalQueuingStrategy_1_1FileBuffer.html#ad8fdd1ce436f585a841696aa49a42756">scanEntries</a>(</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                        std::istream &amp;in,</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;                        std::function&lt;<span class="keywordtype">void</span>(<span class="keyword">const</span> <a class="code" href="classBeeeOn_1_1JournalQueuingStrategy_1_1Entry.html">Entry</a> &amp;entry)&gt; proc,</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;                        <span class="keywordtype">size_t</span> &amp;bytes,</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;                        <span class="keyword">const</span> <span class="keywordtype">size_t</span> count) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        <span class="keyword">private</span>:</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;                Poco::Path m_path;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                <span class="keywordtype">size_t</span> m_offset;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;                <span class="keywordtype">size_t</span> m_size;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        };</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        <span class="keywordtype">void</span> <a class="code" href="classBeeeOn_1_1JournalQueuingStrategy.html#a2b4b9055df9470449b7404109dce17bf">registerBuffer</a>(</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;                <span class="keyword">const</span> <a class="code" href="classBeeeOn_1_1JournalQueuingStrategy_1_1FileBuffer.html">FileBuffer</a> &amp;buffer,</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;                <span class="keyword">const</span> <a class="code" href="structBeeeOn_1_1JournalQueuingStrategy_1_1FileBufferStat.html">FileBufferStat</a> &amp;stat);</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        Poco::Path m_rootDir;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        <span class="keywordtype">bool</span> m_gcDisabled;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        <span class="keywordtype">bool</span> m_neverDropOldest;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        ssize_t m_bytesLimit;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        <span class="keywordtype">bool</span> m_ignoreIndexErrors;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;        Journal::Ptr m_index;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        std::list&lt;FileBuffer&gt; m_buffers;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        std::map&lt;std::string, FileBuffer&gt; m_exhausted;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        std::list&lt;Entry&gt; m_entryCache;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;};</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;}</div>
<div class="ttc" id="classBeeeOn_1_1JournalQueuingStrategy_html_a1d21c18d1377d7daef9320130ddb8a6f"><div class="ttname"><a href="classBeeeOn_1_1JournalQueuingStrategy.html#a1d21c18d1377d7daef9320130ddb8a6f">BeeeOn::JournalQueuingStrategy::bytesUsedAll</a></div><div class="ttdeci">size_t bytesUsedAll() const </div><div class="ttdef"><b>Definition:</b> JournalQueuingStrategy.cpp:666</div></div>
<div class="ttc" id="classBeeeOn_1_1JournalQueuingStrategy_html_ab2a91776d6b05c3359828c714e5db38e"><div class="ttname"><a href="classBeeeOn_1_1JournalQueuingStrategy.html#ab2a91776d6b05c3359828c714e5db38e">BeeeOn::JournalQueuingStrategy::index</a></div><div class="ttdeci">Journal::Ptr index() const </div><div class="ttdef"><b>Definition:</b> JournalQueuingStrategy.cpp:303</div></div>
<div class="ttc" id="classBeeeOn_1_1JournalQueuingStrategy_1_1FileBuffer_html_a4dd81576ba5f916ae5421dc9fa4364e9"><div class="ttname"><a href="classBeeeOn_1_1JournalQueuingStrategy_1_1FileBuffer.html#a4dd81576ba5f916ae5421dc9fa4364e9">BeeeOn::JournalQueuingStrategy::FileBuffer::readEntries</a></div><div class="ttdeci">size_t readEntries(std::function&lt; void(const Entry &amp;entry)&gt; proc)</div><div class="ttdoc">Read all entries from the current offset. The offset is updated to point after the read data (even in...</div></div>
<div class="ttc" id="structBeeeOn_1_1JournalQueuingStrategy_1_1FileBufferStat_html"><div class="ttname"><a href="structBeeeOn_1_1JournalQueuingStrategy_1_1FileBufferStat.html">BeeeOn::JournalQueuingStrategy::FileBufferStat</a></div><div class="ttdoc">Helper struct with statistics collected during an inspection of a FileBuffer instance. </div><div class="ttdef"><b>Definition:</b> JournalQueuingStrategy.h:267</div></div>
<div class="ttc" id="classBeeeOn_1_1JournalQueuingStrategy_html_a307b2cd8561111fb1b6c9df04ca3e183"><div class="ttname"><a href="classBeeeOn_1_1JournalQueuingStrategy.html#a307b2cd8561111fb1b6c9df04ca3e183">BeeeOn::JournalQueuingStrategy::pop</a></div><div class="ttdeci">void pop(size_t count) override</div><div class="ttdoc">Pop the count amount of data off the registered buffers. It updates index accordingly. </div><div class="ttdef"><b>Definition:</b> JournalQueuingStrategy.cpp:418</div></div>
<div class="ttc" id="classBeeeOn_1_1SensorData_html"><div class="ttname"><a href="classBeeeOn_1_1SensorData.html">BeeeOn::SensorData</a></div><div class="ttdef"><b>Definition:</b> SensorData.h:20</div></div>
<div class="ttc" id="classBeeeOn_1_1JournalQueuingStrategy_html_a7ec1b88dab5b316f997b52006ad6886a"><div class="ttname"><a href="classBeeeOn_1_1JournalQueuingStrategy.html#a7ec1b88dab5b316f997b52006ad6886a">BeeeOn::JournalQueuingStrategy::setNeverDropOldest</a></div><div class="ttdeci">void setNeverDropOldest(bool neverDrop)</div><div class="ttdoc">Disable dropping of oldest data. This is useful for debugging or in case of a serious bug in the drop...</div><div class="ttdef"><b>Definition:</b> JournalQueuingStrategy.cpp:65</div></div>
<div class="ttc" id="classBeeeOn_1_1JournalQueuingStrategy_html_add97a136cf8938dc20c51daf2e13fdd6"><div class="ttname"><a href="classBeeeOn_1_1JournalQueuingStrategy.html#add97a136cf8938dc20c51daf2e13fdd6">BeeeOn::JournalQueuingStrategy::dropOldestBuffers</a></div><div class="ttdeci">void dropOldestBuffers(const size_t bytes)</div><div class="ttdoc">Drop oldest valid data to ensure that at least the given bytes amount of space is available for writi...</div><div class="ttdef"><b>Definition:</b> JournalQueuingStrategy.cpp:558</div></div>
<div class="ttc" id="classBeeeOn_1_1JournalQueuingStrategy_1_1FileBuffer_html_acc4a2b3cb275625f92fc8b650d04d85b"><div class="ttname"><a href="classBeeeOn_1_1JournalQueuingStrategy_1_1FileBuffer.html#acc4a2b3cb275625f92fc8b650d04d85b">BeeeOn::JournalQueuingStrategy::FileBuffer::formatEntries</a></div><div class="ttdeci">static std::string formatEntries(const std::vector&lt; SensorData &gt; &amp;data)</div><div class="ttdoc">Format the given data into the form as expected by the readEntries() method. </div><div class="ttdef"><b>Definition:</b> JournalQueuingStrategy.cpp:854</div></div>
<div class="ttc" id="classBeeeOn_1_1JournalQueuingStrategy_html_a4b043519cc56089d5c5587a7ccc9b700"><div class="ttname"><a href="classBeeeOn_1_1JournalQueuingStrategy.html#a4b043519cc56089d5c5587a7ccc9b700">BeeeOn::JournalQueuingStrategy::setRootDir</a></div><div class="ttdeci">void setRootDir(const std::string &amp;path)</div><div class="ttdoc">Set the root directory where to create or use a storage. </div><div class="ttdef"><b>Definition:</b> JournalQueuingStrategy.cpp:50</div></div>
<div class="ttc" id="classBeeeOn_1_1JournalQueuingStrategy_1_1Entry_html"><div class="ttname"><a href="classBeeeOn_1_1JournalQueuingStrategy_1_1Entry.html">BeeeOn::JournalQueuingStrategy::Entry</a></div><div class="ttdoc">An instance of Entry represents a single record in the FileBuffer. Such record contains a single Sens...</div><div class="ttdef"><b>Definition:</b> JournalQueuingStrategy.h:227</div></div>
<div class="ttc" id="classBeeeOn_1_1JournalQueuingStrategy_html_aee42bcae059335f838f27b8e6332a3f0"><div class="ttname"><a href="classBeeeOn_1_1JournalQueuingStrategy.html#aee42bcae059335f838f27b8e6332a3f0">BeeeOn::JournalQueuingStrategy::whipeFile</a></div><div class="ttdeci">bool whipeFile(Poco::File file, bool usuallyFails=false) const </div><div class="ttdoc">Remove the given file if possible. If usuallyFails is true, than the method does not log errors...</div><div class="ttdef"><b>Definition:</b> JournalQueuingStrategy.cpp:220</div></div>
<div class="ttc" id="classBeeeOn_1_1JournalQueuingStrategy_html_aa0a205bd24d1e25df1238222984e22ea"><div class="ttname"><a href="classBeeeOn_1_1JournalQueuingStrategy.html#aa0a205bd24d1e25df1238222984e22ea">BeeeOn::JournalQueuingStrategy::setIgnoreIndexErrors</a></div><div class="ttdeci">void setIgnoreIndexErrors(bool ignore)</div><div class="ttdoc">Configure behaviour of index loading. If the index contains broken entries, we can either fail quickl...</div><div class="ttdef"><b>Definition:</b> JournalQueuingStrategy.cpp:84</div></div>
<div class="ttc" id="classBeeeOn_1_1JournalQueuingStrategy_html_a0b283928c47f32f50267b17fc93d9209"><div class="ttname"><a href="classBeeeOn_1_1JournalQueuingStrategy.html#a0b283928c47f32f50267b17fc93d9209">BeeeOn::JournalQueuingStrategy::precacheEntries</a></div><div class="ttdeci">size_t precacheEntries(size_t count)</div><div class="ttdoc">The call ensures that there are up to count entries into the m_entryCache. If there is not enough dat...</div><div class="ttdef"><b>Definition:</b> JournalQueuingStrategy.cpp:352</div></div>
<div class="ttc" id="classBeeeOn_1_1JournalQueuingStrategy_html_a62c0bcb8f8774c7a1cb7bb06788a97b8"><div class="ttname"><a href="classBeeeOn_1_1JournalQueuingStrategy.html#a62c0bcb8f8774c7a1cb7bb06788a97b8">BeeeOn::JournalQueuingStrategy::garbageCollect</a></div><div class="ttdeci">bool garbageCollect(const size_t bytes)</div><div class="ttdoc">Perform garbage collection to ensure that at least the given bytes amount of space is available for w...</div><div class="ttdef"><b>Definition:</b> JournalQueuingStrategy.cpp:481</div></div>
<div class="ttc" id="classBeeeOn_1_1JournalQueuingStrategy_1_1FileBuffer_html_ad8fdd1ce436f585a841696aa49a42756"><div class="ttname"><a href="classBeeeOn_1_1JournalQueuingStrategy_1_1FileBuffer.html#ad8fdd1ce436f585a841696aa49a42756">BeeeOn::JournalQueuingStrategy::FileBuffer::scanEntries</a></div><div class="ttdeci">size_t scanEntries(size_t offset, std::function&lt; void(const Entry &amp;entry)&gt; proc, size_t &amp;bytes, const size_t count) const </div><div class="ttdoc">Scan for up to count entries from the current offset. The parameter bytes is updated continuously whi...</div></div>
<div class="ttc" id="classBeeeOn_1_1JournalQueuingStrategy_html_acdabb64278190634b4575550699b665a"><div class="ttname"><a href="classBeeeOn_1_1JournalQueuingStrategy.html#acdabb64278190634b4575550699b665a">BeeeOn::JournalQueuingStrategy::initIndex</a></div><div class="ttdeci">void initIndex(const Poco::Path &amp;index)</div><div class="ttdoc">Initialize the journaling index either by creating a new empty one or by loading the existing one...</div><div class="ttdef"><b>Definition:</b> JournalQueuingStrategy.cpp:89</div></div>
<div class="ttc" id="classBeeeOn_1_1JournalQueuingStrategy_html_a3d63d53ba2b2b3beda1a3c4e4a690d6d"><div class="ttname"><a href="classBeeeOn_1_1JournalQueuingStrategy.html#a3d63d53ba2b2b3beda1a3c4e4a690d6d">BeeeOn::JournalQueuingStrategy::peek</a></div><div class="ttdeci">size_t peek(std::vector&lt; SensorData &gt; &amp;data, size_t count) override</div><div class="ttdoc">Peek the given count of data off the registered buffers starting from the oldest one. Calling this method is stable (returns the same results) until the pop() method is called. Index is not affected by this call. </div><div class="ttdef"><b>Definition:</b> JournalQueuingStrategy.cpp:378</div></div>
<div class="ttc" id="classBeeeOn_1_1JournalQueuingStrategy_html_a46c7d08af573429bc7c6362669cf2ff5"><div class="ttname"><a href="classBeeeOn_1_1JournalQueuingStrategy.html#a46c7d08af573429bc7c6362669cf2ff5">BeeeOn::JournalQueuingStrategy::inspectAndRegisterBuffer</a></div><div class="ttdeci">void inspectAndRegisterBuffer(const std::string &amp;name, size_t offset, Poco::Timestamp &amp;newest)</div><div class="ttdoc">Inspect buffer of the given name. </div><div class="ttdef"><b>Definition:</b> JournalQueuingStrategy.cpp:108</div></div>
<div class="ttc" id="classBeeeOn_1_1JournalQueuingStrategy_1_1FileBuffer_html_a75ac6d518da66b7f4c31d0e4882d5beb"><div class="ttname"><a href="classBeeeOn_1_1JournalQueuingStrategy_1_1FileBuffer.html#a75ac6d518da66b7f4c31d0e4882d5beb">BeeeOn::JournalQueuingStrategy::FileBuffer::exhausted</a></div><div class="ttdeci">bool exhausted() const </div><div class="ttdef"><b>Definition:</b> JournalQueuingStrategy.cpp:774</div></div>
<div class="ttc" id="classBeeeOn_1_1JournalQueuingStrategy_html_a678ea887006b9f212d23575dae4e6cee"><div class="ttname"><a href="classBeeeOn_1_1JournalQueuingStrategy.html#a678ea887006b9f212d23575dae4e6cee">BeeeOn::JournalQueuingStrategy::setBytesLimit</a></div><div class="ttdeci">void setBytesLimit(int bytes)</div><div class="ttdoc">Set top limit for data consumed by the strategy in the filesystem. This counts all data files (also d...</div><div class="ttdef"><b>Definition:</b> JournalQueuingStrategy.cpp:70</div></div>
<div class="ttc" id="classBeeeOn_1_1JournalQueuingStrategy_html_afe32a6dba8e83e1f17024ad8eaa7a8f0"><div class="ttname"><a href="classBeeeOn_1_1JournalQueuingStrategy.html#afe32a6dba8e83e1f17024ad8eaa7a8f0">BeeeOn::JournalQueuingStrategy::reportStats</a></div><div class="ttdeci">void reportStats(const Poco::Timestamp &amp;newest) const </div><div class="ttdoc">Report statistics about buffers. </div><div class="ttdef"><b>Definition:</b> JournalQueuingStrategy.cpp:211</div></div>
<div class="ttc" id="classBeeeOn_1_1JournalQueuingStrategy_html_a2c3642bf5d270ad9b8d4b9fdfe2bc04c"><div class="ttname"><a href="classBeeeOn_1_1JournalQueuingStrategy.html#a2c3642bf5d270ad9b8d4b9fdfe2bc04c">BeeeOn::JournalQueuingStrategy::prescanBuffers</a></div><div class="ttdeci">void prescanBuffers(Poco::Timestamp &amp;newest, BrokenHandler broken)</div><div class="ttdoc">Pre-scan all buffers in the index, check their consistency, collect some information (entries counts...</div><div class="ttdef"><b>Definition:</b> JournalQueuingStrategy.cpp:140</div></div>
<div class="ttc" id="classBeeeOn_1_1JournalQueuingStrategy_html"><div class="ttname"><a href="classBeeeOn_1_1JournalQueuingStrategy.html">BeeeOn::JournalQueuingStrategy</a></div><div class="ttdoc">JournalQueuingStrategy implements persistent temporary storing of SensorData into a filesystem struct...</div><div class="ttdef"><b>Definition:</b> JournalQueuingStrategy.h:40</div></div>
<div class="ttc" id="classBeeeOn_1_1JournalQueuingStrategy_html_a584541be030509fcacd219641c44d97d"><div class="ttname"><a href="classBeeeOn_1_1JournalQueuingStrategy.html#a584541be030509fcacd219641c44d97d">BeeeOn::JournalQueuingStrategy::bytesUsed</a></div><div class="ttdeci">size_t bytesUsed() const </div><div class="ttdef"><b>Definition:</b> JournalQueuingStrategy.cpp:644</div></div>
<div class="ttc" id="classBeeeOn_1_1JournalQueuingStrategy_html_aafb5ddb639427b28a52ea61b2037f0f7"><div class="ttname"><a href="classBeeeOn_1_1JournalQueuingStrategy.html#aafb5ddb639427b28a52ea61b2037f0f7">BeeeOn::JournalQueuingStrategy::readEntries</a></div><div class="ttdeci">size_t readEntries(std::function&lt; void(const Entry &amp;entry)&gt; proc, size_t count)</div><div class="ttdoc">Read up to count entries sequentially from buffers. For each entry, call the given method proc...</div><div class="ttdef"><b>Definition:</b> JournalQueuingStrategy.cpp:318</div></div>
<div class="ttc" id="classBeeeOn_1_1Loggable_html"><div class="ttname"><a href="classBeeeOn_1_1Loggable.html">BeeeOn::Loggable</a></div><div class="ttdef"><b>Definition:</b> Loggable.h:19</div></div>
<div class="ttc" id="classBeeeOn_1_1JournalQueuingStrategy_html_a9d4e04ba8924fc945610a937a4dc20de"><div class="ttname"><a href="classBeeeOn_1_1JournalQueuingStrategy.html#a9d4e04ba8924fc945610a937a4dc20de">BeeeOn::JournalQueuingStrategy::collectReferenced</a></div><div class="ttdeci">void collectReferenced(std::set&lt; std::string &gt; &amp;referenced) const </div><div class="ttdoc">Collect all referenced buffers. Such buffers must not be deleted and should not be affected in anyway...</div><div class="ttdef"><b>Definition:</b> JournalQueuingStrategy.cpp:473</div></div>
<div class="ttc" id="classBeeeOn_1_1JournalQueuingStrategy_1_1FileBuffer_html"><div class="ttname"><a href="classBeeeOn_1_1JournalQueuingStrategy_1_1FileBuffer.html">BeeeOn::JournalQueuingStrategy::FileBuffer</a></div><div class="ttdoc">Representation of a persistent file buffer that contains entries holding the stored SensorData...</div><div class="ttdef"><b>Definition:</b> JournalQueuingStrategy.h:282</div></div>
<div class="ttc" id="classBeeeOn_1_1JournalQueuingStrategy_html_a20a25e98f42452dfc2e286813c1ecabc"><div class="ttname"><a href="classBeeeOn_1_1JournalQueuingStrategy.html#a20a25e98f42452dfc2e286813c1ecabc">BeeeOn::JournalQueuingStrategy::pathTo</a></div><div class="ttdeci">Poco::Path pathTo(const std::string &amp;name) const </div><div class="ttdef"><b>Definition:</b> JournalQueuingStrategy.cpp:702</div></div>
<div class="ttc" id="classBeeeOn_1_1JournalQueuingStrategy_html_abe8b64d8ab42742c1ffe0c82f61717b7"><div class="ttname"><a href="classBeeeOn_1_1JournalQueuingStrategy.html#abe8b64d8ab42742c1ffe0c82f61717b7">BeeeOn::JournalQueuingStrategy::push</a></div><div class="ttdeci">void push(const std::vector&lt; SensorData &gt; &amp;data) override</div><div class="ttdoc">Push the given data into a separate buffer and update the index accordingly. In case of serious failu...</div><div class="ttdef"><b>Definition:</b> JournalQueuingStrategy.cpp:308</div></div>
<div class="ttc" id="classBeeeOn_1_1JournalQueuingStrategy_html_a2caf7be25e8d3716fa9bad1540714422"><div class="ttname"><a href="classBeeeOn_1_1JournalQueuingStrategy.html#a2caf7be25e8d3716fa9bad1540714422">BeeeOn::JournalQueuingStrategy::writeData</a></div><div class="ttdeci">std::string writeData(const std::string &amp;data, bool force=true) const </div><div class="ttdoc">Write data safely to a file and return its name. </div><div class="ttdef"><b>Definition:</b> JournalQueuingStrategy.cpp:272</div></div>
<div class="ttc" id="classBeeeOn_1_1QueuingStrategy_html"><div class="ttname"><a href="classBeeeOn_1_1QueuingStrategy.html">BeeeOn::QueuingStrategy</a></div><div class="ttdef"><b>Definition:</b> QueuingStrategy.h:18</div></div>
<div class="ttc" id="classBeeeOn_1_1JournalQueuingStrategy_html_a86859d59fe6bea461434eabf90b23889"><div class="ttname"><a href="classBeeeOn_1_1JournalQueuingStrategy.html#a86859d59fe6bea461434eabf90b23889">BeeeOn::JournalQueuingStrategy::overLimit</a></div><div class="ttdeci">bool overLimit(size_t bytes) const </div><div class="ttdef"><b>Definition:</b> JournalQueuingStrategy.cpp:75</div></div>
<div class="ttc" id="classBeeeOn_1_1JournalQueuingStrategy_html_a2b4b9055df9470449b7404109dce17bf"><div class="ttname"><a href="classBeeeOn_1_1JournalQueuingStrategy.html#a2b4b9055df9470449b7404109dce17bf">BeeeOn::JournalQueuingStrategy::registerBuffer</a></div><div class="ttdeci">void registerBuffer(const FileBuffer &amp;buffer, const FileBufferStat &amp;stat)</div><div class="ttdoc">Register the given buffer with the strategy. The index is not updated by this call. </div><div class="ttdef"><b>Definition:</b> JournalQueuingStrategy.cpp:246</div></div>
<div class="ttc" id="classBeeeOn_1_1JournalQueuingStrategy_html_aad02148e1b7b9c971c1753351d34c3e4"><div class="ttname"><a href="classBeeeOn_1_1JournalQueuingStrategy.html#aad02148e1b7b9c971c1753351d34c3e4">BeeeOn::JournalQueuingStrategy::setDisableGC</a></div><div class="ttdeci">void setDisableGC(bool disable)</div><div class="ttdoc">Disable garbage-collection entirely. This is useful for debugging or in case of a serious bug in the ...</div><div class="ttdef"><b>Definition:</b> JournalQueuingStrategy.cpp:60</div></div>
<div class="ttc" id="classBeeeOn_1_1JournalQueuingStrategy_html_a6ef7b5e37452c91732374dc94da7213d"><div class="ttname"><a href="classBeeeOn_1_1JournalQueuingStrategy.html#a6ef7b5e37452c91732374dc94da7213d">BeeeOn::JournalQueuingStrategy::initIndexAndScan</a></div><div class="ttdeci">Poco::Timestamp initIndexAndScan(BrokenHandler broken)</div><div class="ttdoc">Performs all the necessary steps done when calling setup(). The given function is called when a broke...</div><div class="ttdef"><b>Definition:</b> JournalQueuingStrategy.cpp:193</div></div>
<div class="ttc" id="classBeeeOn_1_1JournalQueuingStrategy_html_a7e9d33e4f3bf626177c34a5c1157453a"><div class="ttname"><a href="classBeeeOn_1_1JournalQueuingStrategy.html#a7e9d33e4f3bf626177c34a5c1157453a">BeeeOn::JournalQueuingStrategy::tsString</a></div><div class="ttdeci">static std::string tsString(const Poco::Timestamp &amp;t)</div><div class="ttdef"><b>Definition:</b> JournalQueuingStrategy.cpp:707</div></div>
<div class="ttc" id="classBeeeOn_1_1JournalQueuingStrategy_html_a6170fff4557c0efbf1df0b974311a4af"><div class="ttname"><a href="classBeeeOn_1_1JournalQueuingStrategy.html#a6170fff4557c0efbf1df0b974311a4af">BeeeOn::JournalQueuingStrategy::rootDir</a></div><div class="ttdeci">Poco::Path rootDir() const </div><div class="ttdef"><b>Definition:</b> JournalQueuingStrategy.cpp:55</div></div>
<div class="ttc" id="classBeeeOn_1_1JournalQueuingStrategy_html_aff94abfe05f6870c7b0f2e1c2ead11ae"><div class="ttname"><a href="classBeeeOn_1_1JournalQueuingStrategy.html#aff94abfe05f6870c7b0f2e1c2ead11ae">BeeeOn::JournalQueuingStrategy::setup</a></div><div class="ttdeci">virtual void setup()</div><div class="ttdoc">Setup the storage for the JournalQueuingStrategy. It creates new index or loads the existing one...</div><div class="ttdef"><b>Definition:</b> JournalQueuingStrategy.cpp:181</div></div>
<div class="ttc" id="classBeeeOn_1_1JournalQueuingStrategy_html_a4a4e22b72f46626a9abef0980bf8b52e"><div class="ttname"><a href="classBeeeOn_1_1JournalQueuingStrategy.html#a4a4e22b72f46626a9abef0980bf8b52e">BeeeOn::JournalQueuingStrategy::empty</a></div><div class="ttdeci">bool empty() override</div><div class="ttdoc">The call might call precacheEntries() to load up to 1 entry. </div><div class="ttdef"><b>Definition:</b> JournalQueuingStrategy.cpp:370</div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
