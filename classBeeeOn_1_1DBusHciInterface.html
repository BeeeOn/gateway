<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>BeeeOn Gateway: BeeeOn::DBusHciInterface Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="BeeeOn.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">BeeeOn Gateway
   &#160;<span id="projectnumber">v2018.07.1-rc1</span>
   </div>
   <div id="projectbrief">Platform to interconnect the IoT world</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="classes.html"><span>Data&#160;Structure&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Data&#160;Fields</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>BeeeOn</b></li><li class="navelem"><a class="el" href="classBeeeOn_1_1DBusHciInterface.html">DBusHciInterface</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-static-methods">Static Protected Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">BeeeOn::DBusHciInterface Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>The class realizes communication with BlueZ deamon using D-Bus. It allows to find new BLE and Bluetooth Classic devices and send read/write requests.  
 <a href="classBeeeOn_1_1DBusHciInterface.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="DBusHciInterface_8h_source.html">DBusHciInterface.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for BeeeOn::DBusHciInterface:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classBeeeOn_1_1DBusHciInterface.png" usemap="#BeeeOn::DBusHciInterface_map" alt=""/>
  <map id="BeeeOn::DBusHciInterface_map" name="BeeeOn::DBusHciInterface_map">
<area href="classBeeeOn_1_1HciInterface.html" alt="BeeeOn::HciInterface" shape="rect" coords="0,0,163,24"/>
<area href="classBeeeOn_1_1Loggable.html" alt="BeeeOn::Loggable" shape="rect" coords="173,0,336,24"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a138503c29a7ff54b688f490a64b11a6c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a138503c29a7ff54b688f490a64b11a6c"></a>
typedef std::function&lt; bool(const <br class="typebreak"/>
std::string &amp;path)&gt;&#160;</td><td class="memItemRight" valign="bottom"><b>PathFilter</b></td></tr>
<tr class="separator:a138503c29a7ff54b688f490a64b11a6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_types_classBeeeOn_1_1HciInterface"><td colspan="2" onclick="javascript:toggleInherit('pub_types_classBeeeOn_1_1HciInterface')"><img src="closed.png" alt="-"/>&#160;Public Types inherited from <a class="el" href="classBeeeOn_1_1HciInterface.html">BeeeOn::HciInterface</a></td></tr>
<tr class="memitem:a5126bf1be08f148fb95cf50b92feb825 inherit pub_types_classBeeeOn_1_1HciInterface"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5126bf1be08f148fb95cf50b92feb825"></a>
typedef Poco::SharedPtr<br class="typebreak"/>
&lt; <a class="el" href="classBeeeOn_1_1HciInterface.html">HciInterface</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>Ptr</b></td></tr>
<tr class="separator:a5126bf1be08f148fb95cf50b92feb825 inherit pub_types_classBeeeOn_1_1HciInterface"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:af54d1dd4487c066484d83671978bae68"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeeeOn_1_1DBusHciInterface.html#af54d1dd4487c066484d83671978bae68">DBusHciInterface</a> (const std::string &amp;name, Poco::SharedPtr&lt; Poco::FastMutex &gt; statusMutex)</td></tr>
<tr class="separator:af54d1dd4487c066484d83671978bae68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70688dfe4f2812148ff1f14f51af45e5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeeeOn_1_1DBusHciInterface.html#a70688dfe4f2812148ff1f14f51af45e5">down</a> () const </td></tr>
<tr class="memdesc:a70688dfe4f2812148ff1f14f51af45e5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets hci interface down.  <a href="#a70688dfe4f2812148ff1f14f51af45e5">More...</a><br/></td></tr>
<tr class="separator:a70688dfe4f2812148ff1f14f51af45e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65e5d9836625201d8d93f7bd06d5caee"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeeeOn_1_1DBusHciInterface.html#a65e5d9836625201d8d93f7bd06d5caee">up</a> () const override</td></tr>
<tr class="separator:a65e5d9836625201d8d93f7bd06d5caee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31b6e141d76f0286445067acd02bc582"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeeeOn_1_1DBusHciInterface.html#a31b6e141d76f0286445067acd02bc582">reset</a> () const override</td></tr>
<tr class="separator:a31b6e141d76f0286445067acd02bc582"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9fc64f257cc948a23cced1d9aa3e1b1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af9fc64f257cc948a23cced1d9aa3e1b1"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeeeOn_1_1DBusHciInterface.html#af9fc64f257cc948a23cced1d9aa3e1b1">detect</a> (const <a class="el" href="classBeeeOn_1_1MACAddress.html">MACAddress</a> &amp;address) const override</td></tr>
<tr class="memdesc:af9fc64f257cc948a23cced1d9aa3e1b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Uses detect method of <a class="el" href="classBeeeOn_1_1BluezHciInterface.html">BluezHciInterface</a> class to check state of device with <a class="el" href="classBeeeOn_1_1MACAddress.html">MACAddress</a>. <br/></td></tr>
<tr class="separator:af9fc64f257cc948a23cced1d9aa3e1b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f1d662a2a90a8f2e9cf2fae364a7ad9"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4f1d662a2a90a8f2e9cf2fae364a7ad9"></a>
std::map&lt; <a class="el" href="classBeeeOn_1_1MACAddress.html">MACAddress</a>, std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeeeOn_1_1DBusHciInterface.html#a4f1d662a2a90a8f2e9cf2fae364a7ad9">scan</a> () const override</td></tr>
<tr class="memdesc:a4f1d662a2a90a8f2e9cf2fae364a7ad9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Uses scan method of <a class="el" href="classBeeeOn_1_1BluezHciInterface.html">BluezHciInterface</a> class to discover the bluetooh classic devices. <br/></td></tr>
<tr class="separator:a4f1d662a2a90a8f2e9cf2fae364a7ad9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98317fd72f5ac3e4c9a5794204255754"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a98317fd72f5ac3e4c9a5794204255754"></a>
std::map&lt; <a class="el" href="classBeeeOn_1_1MACAddress.html">MACAddress</a>, std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeeeOn_1_1DBusHciInterface.html#a98317fd72f5ac3e4c9a5794204255754">lescan</a> (const Poco::Timespan &amp;timeout) const override</td></tr>
<tr class="memdesc:a98317fd72f5ac3e4c9a5794204255754"><td class="mdescLeft">&#160;</td><td class="mdescRight">Scans the Bluetooth LE network and returns all available devices. The method starts with the obtaining of all known devices to Bluez deamon. Then the bluetooth adapter starts discovery of new devices whitch extends collection of devices. Availability of device is determined by paramter RSSI. If the RSSI parametr is 0 then the device is unavailable. <br/></td></tr>
<tr class="separator:a98317fd72f5ac3e4c9a5794204255754"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7c75c936abb81d75f2c5faba1e354cb"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af7c75c936abb81d75f2c5faba1e354cb"></a>
<a class="el" href="classBeeeOn_1_1HciInfo.html">HciInfo</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeeeOn_1_1DBusHciInterface.html#af7c75c936abb81d75f2c5faba1e354cb">info</a> () const override</td></tr>
<tr class="memdesc:af7c75c936abb81d75f2c5faba1e354cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Uses <a class="el" href="classBeeeOn_1_1BluezHciInterface.html">BluezHciInterface</a> to retrieve hci info. <br/></td></tr>
<tr class="separator:af7c75c936abb81d75f2c5faba1e354cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-static-methods"></a>
Static Protected Member Functions</h2></td></tr>
<tr class="memitem:a9d137382c0077a80df3fe17ae920eb71"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9d137382c0077a80df3fe17ae920eb71"></a>
static gboolean&#160;</td><td class="memItemRight" valign="bottom"><b>onStopLoop</b> (gpointer loop)</td></tr>
<tr class="separator:a9d137382c0077a80df3fe17ae920eb71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a255b1a00a2e5c0647f6042c241bc515b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a255b1a00a2e5c0647f6042c241bc515b"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>onDBusObjectAdded</b> (GDBusObjectManager *objectManager, GDBusObject *object, gpointer userData)</td></tr>
<tr class="separator:a255b1a00a2e5c0647f6042c241bc515b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The class realizes communication with BlueZ deamon using D-Bus. It allows to find new BLE and Bluetooth Classic devices and send read/write requests. </p>
<p>The class uses <a class="el" href="classBeeeOn_1_1BluezHciInterface.html">BluezHciInterface</a> to work with Bluetooth Classic devices and to retrieve hci info. It requires a running instance of the D-Bus service "org.bluez" to work wth BLE devices. Firstly it is needed to find BLE devices in a bluetooth network to create D-Bus device objects. Accessing the BLE devices is possible via D-Bus device objects (defined by path "/org/bluez/hci0/dev_FF_FF_FF_FF_FF_FF"). The D-Bus device objects provide methods to perform actions as connect, read, write and disconnect. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="af54d1dd4487c066484d83671978bae68"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DBusHciInterface::DBusHciInterface </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Poco::SharedPtr&lt; Poco::FastMutex &gt;&#160;</td>
          <td class="paramname"><em>statusMutex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>name of hci </td></tr>
    <tr><td class="paramname">statusMutex</td><td>lock ensures exclusive access to state of hci </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a70688dfe4f2812148ff1f14f51af45e5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DBusHciInterface::down </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets hci interface down. </p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">IOException</td><td>in case of a failure </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a31b6e141d76f0286445067acd02bc582"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void DBusHciInterface::reset </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Reset hci interface - turn down &amp; up. </p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">IOException</td><td>in case of a failure </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classBeeeOn_1_1HciInterface.html#a5d333da9231bcbc885f98fb42f19bb20">BeeeOn::HciInterface</a>.</p>

</div>
</div>
<a class="anchor" id="a65e5d9836625201d8d93f7bd06d5caee"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void DBusHciInterface::up </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Try to set hci interface up. The root priviledges of the system might be required. </p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">IOException</td><td>in case of a failure </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classBeeeOn_1_1HciInterface.html#ae44d72ca116d0f9f19c6200785cd9631">BeeeOn::HciInterface</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/var/lib/jenkins/workspace/beeeon-gateway-master/src/bluetooth/<a class="el" href="DBusHciInterface_8h_source.html">DBusHciInterface.h</a></li>
<li>/var/lib/jenkins/workspace/beeeon-gateway-master/src/bluetooth/DBusHciInterface.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
