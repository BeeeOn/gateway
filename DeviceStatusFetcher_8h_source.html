<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>BeeeOn Gateway: /var/lib/jenkins/workspace/beeeon-gateway-master/src/core/DeviceStatusFetcher.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="BeeeOn.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">BeeeOn Gateway
   &#160;<span id="projectnumber">v2018.07.1-rc3-57-g7f041a6</span>
   </div>
   <div id="projectbrief">Platform to interconnect the IoT world</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_aebb8dcc11953d78e620bbef0b9e2183.html">core</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">DeviceStatusFetcher.h</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#pragma once</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor">#include &lt;map&gt;</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#include &lt;set&gt;</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#include &lt;Poco/Clock.h&gt;</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &lt;Poco/SharedPtr.h&gt;</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &lt;Poco/Timespan.h&gt;</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &quot;core/CommandSender.h&quot;</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &quot;core/DeviceStatusHandler.h&quot;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;loop/StoppableRunnable.h&quot;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;loop/StopControl.h&quot;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;util/Loggable.h&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="keyword">namespace </span>BeeeOn {</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;</div>
<div class="line"><a name="l00024"></a><span class="lineno"><a class="line" href="classBeeeOn_1_1DeviceStatusFetcher.html">   24</a></span>&#160;<span class="keyword">class </span><a class="code" href="classBeeeOn_1_1DeviceStatusFetcher.html">DeviceStatusFetcher</a> :</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;        <span class="keyword">public</span> <a class="code" href="classBeeeOn_1_1CommandSender.html">CommandSender</a>,</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;        <span class="keyword">public</span> <a class="code" href="classBeeeOn_1_1StoppableRunnable.html">StoppableRunnable</a>,</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;        <a class="code" href="classBeeeOn_1_1Loggable.html">Loggable</a> {</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;        <span class="keyword">typedef</span> Poco::SharedPtr&lt;DeviceStatusFetcher&gt; Ptr;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;        <a class="code" href="classBeeeOn_1_1DeviceStatusFetcher.html">DeviceStatusFetcher</a>();</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;        <span class="keywordtype">void</span> <a class="code" href="classBeeeOn_1_1DeviceStatusFetcher.html#aae6ddf07de216eff0ca5b21e906189a3">setIdleDuration</a>(<span class="keyword">const</span> Poco::Timespan &amp;duration);</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;        <span class="keywordtype">void</span> <a class="code" href="classBeeeOn_1_1DeviceStatusFetcher.html#a58d02df3deca5abd406133da7b265080">setWaitTimeout</a>(<span class="keyword">const</span> Poco::Timespan &amp;timeout);</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;        <span class="keywordtype">void</span> <a class="code" href="classBeeeOn_1_1DeviceStatusFetcher.html#a28e15363d958d792a4fbff47dea089a7">setRepeatTimeout</a>(<span class="keyword">const</span> Poco::Timespan &amp;timeout);</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;        <span class="keywordtype">void</span> <a class="code" href="classBeeeOn_1_1DeviceStatusFetcher.html#a4d0b2ec7630aeb8e396c40dd118d931c">registerHandler</a>(DeviceStatusHandler::Ptr handler);</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;        <span class="keywordtype">void</span> <a class="code" href="classBeeeOn_1_1DeviceStatusFetcher.html#aa4d7966674a59272adf98a605598c9d9">clearHandlers</a>();</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        <span class="keywordtype">void</span> run() <span class="keyword">override</span>;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        <span class="keywordtype">void</span> <a class="code" href="classBeeeOn_1_1DeviceStatusFetcher.html#aef74283a734dcaa474edb9d2af14453b">stop</a>() <span class="keyword">override</span>;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="keyword">protected</span>:</div>
<div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="classBeeeOn_1_1DeviceStatusFetcher_1_1PrefixAnswer.html">   69</a></span>&#160;        <span class="keyword">class </span><a class="code" href="classBeeeOn_1_1DeviceStatusFetcher_1_1PrefixAnswer.html">PrefixAnswer</a> : <span class="keyword">public</span> <a class="code" href="classBeeeOn_1_1Answer.html">Answer</a> {</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        <span class="keyword">public</span>:</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;                <span class="keyword">typedef</span> Poco::AutoPtr&lt;PrefixAnswer&gt; Ptr;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;                <a class="code" href="classBeeeOn_1_1DeviceStatusFetcher_1_1PrefixAnswer.html">PrefixAnswer</a>(</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;                        <a class="code" href="classBeeeOn_1_1AnswerQueue.html">AnswerQueue</a> &amp;queue,</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;                        <span class="keyword">const</span> <a class="code" href="classBeeeOn_1_1Enum.html">DevicePrefix</a> &amp;prefix);</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;                <a class="code" href="classBeeeOn_1_1Enum.html">DevicePrefix</a> prefix() <span class="keyword">const</span>;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        <span class="keyword">private</span>:</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;                <span class="keyword">const</span> <a class="code" href="classBeeeOn_1_1Enum.html">DevicePrefix</a> m_prefix;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        };</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div>
<div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="classBeeeOn_1_1DeviceStatusFetcher_1_1PrefixStatus.html">   83</a></span>&#160;        <span class="keyword">class </span><a class="code" href="classBeeeOn_1_1DeviceStatusFetcher_1_1PrefixStatus.html">PrefixStatus</a> {</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        <span class="keyword">public</span>:</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;                <a class="code" href="classBeeeOn_1_1DeviceStatusFetcher_1_1PrefixStatus.html">PrefixStatus</a>();</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;                <span class="keywordtype">void</span> <a class="code" href="classBeeeOn_1_1DeviceStatusFetcher_1_1PrefixStatus.html#aecc468fe8f99c7b9a5e22e455b687259">startRequest</a>();</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;                <span class="keywordtype">void</span> <a class="code" href="classBeeeOn_1_1DeviceStatusFetcher_1_1PrefixStatus.html#a3e198a2b0c0c308496ae0a5e22e20cff">deliverResponse</a>(<span class="keywordtype">bool</span> successful);</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;                <span class="keywordtype">bool</span> <a class="code" href="classBeeeOn_1_1DeviceStatusFetcher_1_1PrefixStatus.html#a014cbc34dc4e7485bfa911f59bc523ea">needsRequest</a>() <span class="keyword">const</span>;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                <span class="keywordtype">bool</span> <a class="code" href="classBeeeOn_1_1DeviceStatusFetcher_1_1PrefixStatus.html#a085dede67f007c582cd4b427f3d67412">shouldRepeat</a>(<span class="keyword">const</span> Poco::Timespan &amp;repeatTimeout) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        <span class="keyword">private</span>:</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                Poco::Clock m_lastRequested;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;                <span class="keywordtype">bool</span> m_successful;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        };</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div>
<div class="line"><a name="l00127"></a><span class="lineno"><a class="line" href="classBeeeOn_1_1DeviceStatusFetcher.html#a4c33e34629b4c7386f57e5e4390eeda1">  127</a></span>&#160;        <span class="keyword">enum</span> <a class="code" href="classBeeeOn_1_1DeviceStatusFetcher.html#a4c33e34629b4c7386f57e5e4390eeda1">FetchStatus</a> {</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;                NOTHING,</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;                WOULD_REPEAT,</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                ACTIVE</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        };</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="keyword">protected</span>:</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        <a class="code" href="classBeeeOn_1_1DeviceStatusFetcher.html#a4c33e34629b4c7386f57e5e4390eeda1">FetchStatus</a> <a class="code" href="classBeeeOn_1_1DeviceStatusFetcher.html#abab472785f99cfa4aa6eed0e6e42ad90">fetchUndone</a>();</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        PrefixAnswer::Ptr <a class="code" href="classBeeeOn_1_1DeviceStatusFetcher.html#a0c2e9880ac321664ba5eb3f832fe3889">handleDirtyAnswer</a>(Answer::Ptr answer);</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        std::set&lt;DeviceStatusHandler::Ptr&gt; <a class="code" href="classBeeeOn_1_1DeviceStatusFetcher.html#a7351d077e930e5d7e145e146ee9aac8f">matchHandlers</a>(</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;                        <span class="keyword">const</span> PrefixAnswer::Ptr answer) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        <span class="keywordtype">void</span> <a class="code" href="classBeeeOn_1_1DeviceStatusFetcher.html#a2f485034eaa75409e2a7471f322dfc38">processAnswer</a>(</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;                PrefixAnswer::Ptr answer,</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;                std::set&lt;DeviceStatusHandler::Ptr&gt; handler);</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        <span class="keywordtype">void</span> <a class="code" href="classBeeeOn_1_1DeviceStatusFetcher.html#afdfb0c6c07b72d8d2d03a6b4469f60f6">collectPaired</a>(</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                std::set&lt;DeviceID&gt; &amp;paired,</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                <span class="keyword">const</span> std::vector&lt;DeviceID&gt; &amp;received,</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;                <span class="keyword">const</span> <a class="code" href="classBeeeOn_1_1Enum.html">DevicePrefix</a> &amp;prefix) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        <a class="code" href="classBeeeOn_1_1StopControl.html">StopControl</a> m_stopControl;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        Poco::Timespan m_idleDuration;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        Poco::Timespan m_waitTimeout;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        Poco::Timespan m_repeatTimeout;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        std::map&lt;DevicePrefix, std::set&lt;DeviceStatusHandler::Ptr&gt;&gt; m_handlers;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        std::map&lt;DevicePrefix, PrefixStatus&gt; m_status;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;};</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;}</div>
<div class="ttc" id="classBeeeOn_1_1DeviceStatusFetcher_html_a7351d077e930e5d7e145e146ee9aac8f"><div class="ttname"><a href="classBeeeOn_1_1DeviceStatusFetcher.html#a7351d077e930e5d7e145e146ee9aac8f">BeeeOn::DeviceStatusFetcher::matchHandlers</a></div><div class="ttdeci">std::set&lt; DeviceStatusHandler::Ptr &gt; matchHandlers(const PrefixAnswer::Ptr answer) const </div><div class="ttdef"><b>Definition:</b> DeviceStatusFetcher.cpp:189</div></div>
<div class="ttc" id="classBeeeOn_1_1Answer_html"><div class="ttname"><a href="classBeeeOn_1_1Answer.html">BeeeOn::Answer</a></div><div class="ttdef"><b>Definition:</b> Answer.h:31</div></div>
<div class="ttc" id="classBeeeOn_1_1AnswerQueue_html"><div class="ttname"><a href="classBeeeOn_1_1AnswerQueue.html">BeeeOn::AnswerQueue</a></div><div class="ttdef"><b>Definition:</b> AnswerQueue.h:23</div></div>
<div class="ttc" id="classBeeeOn_1_1DeviceStatusFetcher_1_1PrefixAnswer_html"><div class="ttname"><a href="classBeeeOn_1_1DeviceStatusFetcher_1_1PrefixAnswer.html">BeeeOn::DeviceStatusFetcher::PrefixAnswer</a></div><div class="ttdoc">To simplify Answer management, include the prefix of the connected ServerDeviceListCommand inside the...</div><div class="ttdef"><b>Definition:</b> DeviceStatusFetcher.h:69</div></div>
<div class="ttc" id="classBeeeOn_1_1DeviceStatusFetcher_html_afdfb0c6c07b72d8d2d03a6b4469f60f6"><div class="ttname"><a href="classBeeeOn_1_1DeviceStatusFetcher.html#afdfb0c6c07b72d8d2d03a6b4469f60f6">BeeeOn::DeviceStatusFetcher::collectPaired</a></div><div class="ttdeci">void collectPaired(std::set&lt; DeviceID &gt; &amp;paired, const std::vector&lt; DeviceID &gt; &amp;received, const DevicePrefix &amp;prefix) const </div><div class="ttdoc">Process paired devices as given in a single Answer result. Only devices matching the given prefix wou...</div><div class="ttdef"><b>Definition:</b> DeviceStatusFetcher.cpp:325</div></div>
<div class="ttc" id="classBeeeOn_1_1DeviceStatusFetcher_html_a4c33e34629b4c7386f57e5e4390eeda1"><div class="ttname"><a href="classBeeeOn_1_1DeviceStatusFetcher.html#a4c33e34629b4c7386f57e5e4390eeda1">BeeeOn::DeviceStatusFetcher::FetchStatus</a></div><div class="ttdeci">FetchStatus</div><div class="ttdoc">Denote certain situations of the status fetching. </div><div class="ttdef"><b>Definition:</b> DeviceStatusFetcher.h:127</div></div>
<div class="ttc" id="classBeeeOn_1_1DeviceStatusFetcher_html_aae6ddf07de216eff0ca5b21e906189a3"><div class="ttname"><a href="classBeeeOn_1_1DeviceStatusFetcher.html#aae6ddf07de216eff0ca5b21e906189a3">BeeeOn::DeviceStatusFetcher::setIdleDuration</a></div><div class="ttdeci">void setIdleDuration(const Poco::Timespan &amp;duration)</div><div class="ttdoc">Set duration how long to sleep while there is nothing to do. </div><div class="ttdef"><b>Definition:</b> DeviceStatusFetcher.cpp:80</div></div>
<div class="ttc" id="classBeeeOn_1_1DeviceStatusFetcher_html_a4d0b2ec7630aeb8e396c40dd118d931c"><div class="ttname"><a href="classBeeeOn_1_1DeviceStatusFetcher.html#a4d0b2ec7630aeb8e396c40dd118d931c">BeeeOn::DeviceStatusFetcher::registerHandler</a></div><div class="ttdeci">void registerHandler(DeviceStatusHandler::Ptr handler)</div><div class="ttdoc">Register the given device status handler. The DeviceStatusFetcher would request a remote pairing regi...</div><div class="ttdef"><b>Definition:</b> DeviceStatusFetcher.cpp:104</div></div>
<div class="ttc" id="classBeeeOn_1_1DeviceStatusFetcher_1_1PrefixStatus_html_a014cbc34dc4e7485bfa911f59bc523ea"><div class="ttname"><a href="classBeeeOn_1_1DeviceStatusFetcher_1_1PrefixStatus.html#a014cbc34dc4e7485bfa911f59bc523ea">BeeeOn::DeviceStatusFetcher::PrefixStatus::needsRequest</a></div><div class="ttdeci">bool needsRequest() const </div><div class="ttdef"><b>Definition:</b> DeviceStatusFetcher.cpp:56</div></div>
<div class="ttc" id="classBeeeOn_1_1DeviceStatusFetcher_html_a28e15363d958d792a4fbff47dea089a7"><div class="ttname"><a href="classBeeeOn_1_1DeviceStatusFetcher.html#a28e15363d958d792a4fbff47dea089a7">BeeeOn::DeviceStatusFetcher::setRepeatTimeout</a></div><div class="ttdeci">void setRepeatTimeout(const Poco::Timespan &amp;timeout)</div><div class="ttdoc">Set timeout to wait until a request is re-issued after its unsuccessful finish (Answer was not fully ...</div><div class="ttdef"><b>Definition:</b> DeviceStatusFetcher.cpp:96</div></div>
<div class="ttc" id="classBeeeOn_1_1DeviceStatusFetcher_1_1PrefixStatus_html_aecc468fe8f99c7b9a5e22e455b687259"><div class="ttname"><a href="classBeeeOn_1_1DeviceStatusFetcher_1_1PrefixStatus.html#aecc468fe8f99c7b9a5e22e455b687259">BeeeOn::DeviceStatusFetcher::PrefixStatus::startRequest</a></div><div class="ttdeci">void startRequest()</div><div class="ttdoc">Update the status of an associated prefix that the request for the associated prefix has been initiat...</div><div class="ttdef"><b>Definition:</b> DeviceStatusFetcher.cpp:43</div></div>
<div class="ttc" id="classBeeeOn_1_1DeviceStatusFetcher_1_1PrefixStatus_html_a3e198a2b0c0c308496ae0a5e22e20cff"><div class="ttname"><a href="classBeeeOn_1_1DeviceStatusFetcher_1_1PrefixStatus.html#a3e198a2b0c0c308496ae0a5e22e20cff">BeeeOn::DeviceStatusFetcher::PrefixStatus::deliverResponse</a></div><div class="ttdeci">void deliverResponse(bool successful)</div><div class="ttdoc">Update the status of an associated prefix that an appropriate response has been delivered. The parameter denotes whether the response has been fully successful or not. This influences whether the request would be repeated. </div><div class="ttdef"><b>Definition:</b> DeviceStatusFetcher.cpp:49</div></div>
<div class="ttc" id="classBeeeOn_1_1DeviceStatusFetcher_html"><div class="ttname"><a href="classBeeeOn_1_1DeviceStatusFetcher.html">BeeeOn::DeviceStatusFetcher</a></div><div class="ttdoc">DeviceStatusFetcher is responsible for fetching pairing state of devices for the registered status ha...</div><div class="ttdef"><b>Definition:</b> DeviceStatusFetcher.h:24</div></div>
<div class="ttc" id="classBeeeOn_1_1StopControl_html"><div class="ttname"><a href="classBeeeOn_1_1StopControl.html">BeeeOn::StopControl</a></div><div class="ttdoc">StopControl implements the stop mechanism generically. </div><div class="ttdef"><b>Definition:</b> StopControl.h:12</div></div>
<div class="ttc" id="classBeeeOn_1_1Enum_html"><div class="ttname"><a href="classBeeeOn_1_1Enum.html">BeeeOn::Enum&lt; DevicePrefixEnum, DevicePrefixEnum::Raw, DevicePrefixNamesInitializer &gt;</a></div></div>
<div class="ttc" id="classBeeeOn_1_1DeviceStatusFetcher_html_aa4d7966674a59272adf98a605598c9d9"><div class="ttname"><a href="classBeeeOn_1_1DeviceStatusFetcher.html#aa4d7966674a59272adf98a605598c9d9">BeeeOn::DeviceStatusFetcher::clearHandlers</a></div><div class="ttdeci">void clearHandlers()</div><div class="ttdoc">Unregister all registered device status handlers. </div><div class="ttdef"><b>Definition:</b> DeviceStatusFetcher.cpp:113</div></div>
<div class="ttc" id="classBeeeOn_1_1CommandSender_html"><div class="ttname"><a href="classBeeeOn_1_1CommandSender.html">BeeeOn::CommandSender</a></div><div class="ttdef"><b>Definition:</b> CommandSender.h:21</div></div>
<div class="ttc" id="classBeeeOn_1_1Loggable_html"><div class="ttname"><a href="classBeeeOn_1_1Loggable.html">BeeeOn::Loggable</a></div><div class="ttdef"><b>Definition:</b> Loggable.h:17</div></div>
<div class="ttc" id="classBeeeOn_1_1DeviceStatusFetcher_html_aef74283a734dcaa474edb9d2af14453b"><div class="ttname"><a href="classBeeeOn_1_1DeviceStatusFetcher.html#aef74283a734dcaa474edb9d2af14453b">BeeeOn::DeviceStatusFetcher::stop</a></div><div class="ttdeci">void stop() override</div><div class="ttdef"><b>Definition:</b> DeviceStatusFetcher.cpp:350</div></div>
<div class="ttc" id="classBeeeOn_1_1DeviceStatusFetcher_1_1PrefixStatus_html_a085dede67f007c582cd4b427f3d67412"><div class="ttname"><a href="classBeeeOn_1_1DeviceStatusFetcher_1_1PrefixStatus.html#a085dede67f007c582cd4b427f3d67412">BeeeOn::DeviceStatusFetcher::PrefixStatus::shouldRepeat</a></div><div class="ttdeci">bool shouldRepeat(const Poco::Timespan &amp;repeatTimeout) const </div><div class="ttdoc">When the response was not fully successful, the request should be repeated. However, we do not want to DoS the remote server. Thus, the repeated requested would be performed after the given repeat timeout. The method returns true only, if the last response was not fully successful and the timeout exceeded sice the last request. </div><div class="ttdef"><b>Definition:</b> DeviceStatusFetcher.cpp:61</div></div>
<div class="ttc" id="classBeeeOn_1_1DeviceStatusFetcher_html_abab472785f99cfa4aa6eed0e6e42ad90"><div class="ttname"><a href="classBeeeOn_1_1DeviceStatusFetcher.html#abab472785f99cfa4aa6eed0e6e42ad90">BeeeOn::DeviceStatusFetcher::fetchUndone</a></div><div class="ttdeci">FetchStatus fetchUndone()</div><div class="ttdoc">Determine status handlers for which no fully successful request was made and dispatch ServerDeviceLis...</div><div class="ttdef"><b>Definition:</b> DeviceStatusFetcher.cpp:118</div></div>
<div class="ttc" id="classBeeeOn_1_1StoppableRunnable_html"><div class="ttname"><a href="classBeeeOn_1_1StoppableRunnable.html">BeeeOn::StoppableRunnable</a></div><div class="ttdef"><b>Definition:</b> StoppableRunnable.h:8</div></div>
<div class="ttc" id="classBeeeOn_1_1DeviceStatusFetcher_html_a2f485034eaa75409e2a7471f322dfc38"><div class="ttname"><a href="classBeeeOn_1_1DeviceStatusFetcher.html#a2f485034eaa75409e2a7471f322dfc38">BeeeOn::DeviceStatusFetcher::processAnswer</a></div><div class="ttdeci">void processAnswer(PrefixAnswer::Ptr answer, std::set&lt; DeviceStatusHandler::Ptr &gt; handler)</div><div class="ttdoc">Process results of the given answer and the matching status handler. When any of the results is unsuc...</div><div class="ttdef"><b>Definition:</b> DeviceStatusFetcher.cpp:268</div></div>
<div class="ttc" id="classBeeeOn_1_1DeviceStatusFetcher_1_1PrefixStatus_html"><div class="ttname"><a href="classBeeeOn_1_1DeviceStatusFetcher_1_1PrefixStatus.html">BeeeOn::DeviceStatusFetcher::PrefixStatus</a></div><div class="ttdef"><b>Definition:</b> DeviceStatusFetcher.h:83</div></div>
<div class="ttc" id="classBeeeOn_1_1DeviceStatusFetcher_html_a0c2e9880ac321664ba5eb3f832fe3889"><div class="ttname"><a href="classBeeeOn_1_1DeviceStatusFetcher.html#a0c2e9880ac321664ba5eb3f832fe3889">BeeeOn::DeviceStatusFetcher::handleDirtyAnswer</a></div><div class="ttdeci">PrefixAnswer::Ptr handleDirtyAnswer(Answer::Ptr answer)</div><div class="ttdoc">Check status of the given answer and if it is not pending and castable to PrefixAnswer, it performs cast and returns it. </div><div class="ttdef"><b>Definition:</b> DeviceStatusFetcher.cpp:159</div></div>
<div class="ttc" id="classBeeeOn_1_1DeviceStatusFetcher_html_a58d02df3deca5abd406133da7b265080"><div class="ttname"><a href="classBeeeOn_1_1DeviceStatusFetcher.html#a58d02df3deca5abd406133da7b265080">BeeeOn::DeviceStatusFetcher::setWaitTimeout</a></div><div class="ttdeci">void setWaitTimeout(const Poco::Timespan &amp;timeout)</div><div class="ttdoc">Set timeout for AnswerQueue::wait() call. </div><div class="ttdef"><b>Definition:</b> DeviceStatusFetcher.cpp:88</div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
